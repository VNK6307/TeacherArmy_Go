# –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

- –í Go –Ω–µ –ø—Ä–∏–Ω—è—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—è–∂—ë–ª—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ ‚Äî –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–∏—à—É—Ç –ø—Ä–æ—Å—Ç–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ.
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—ã—á–Ω–æ —Å—Ç—Ä–æ–∏—Ç—Å—è –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ **—Å–ª–æ–∏**, –∫–∞–∂–¥—ã–π —Å–ª–æ–π ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç.
- –û–¥–∏–Ω —Ñ–∞–π–ª ‚Äî –æ–¥–Ω–∞ –ª–æ–≥–∏–∫–∞. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –≥–æ–Ω–∫–∞–º–∏ ‚Äî –∫–ª–∞–¥—ë–º –≤ `internal/race`, –µ—Å–ª–∏ —Å HTTP ‚Äî –≤ `internal/http`.

---

## –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
race-analyzer/
‚îÇ
‚îú‚îÄ‚îÄ cmd/                   # –í—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (main.go)
‚îÇ   ‚îî‚îÄ‚îÄ main.go
‚îÇ
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ race/              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, —Ä–∞–±–æ—Ç–∞ —Å –≥–æ–Ω–∫–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ model.go       # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –±–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ service.go     # –õ–æ–≥–∏–∫–∞ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ http/              # HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handler.go
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ storage/           # –í—Ä–µ–º–µ–Ω–Ω–æ–µ –∏–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ       ‚îú‚îÄ‚îÄ memory.go      # –ü–∞–º—è—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–¥–ª—è –Ω–∞—á–∞–ª–∞)
‚îÇ       ‚îî‚îÄ‚îÄ postgres.go    # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î (–ø–æ–∑–∂–µ)
‚îÇ
‚îú‚îÄ‚îÄ go.mod
‚îî‚îÄ‚îÄ results.txt            # –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞
```

---

## –ü–æ–¥—Ö–æ–¥ –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é –∫–æ–¥–∞

- –ù–µ —Å–ø–µ—à–∏—Ç–µ –ø–∏—Å–∞—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É. –ù–∞—á–Ω–∏—Ç–µ —Å —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤, –ø–æ—Ç–æ–º –¥–æ–±–∞–≤—å—Ç–µ HTTP, –ø–æ—Ç–æ–º –±–∞–∑—É.
- –ù–µ –±–æ–π—Ç–µ—Å—å –¥–µ–ª–∞—Ç—å "–≤ –ª–æ–±", –Ω–æ —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –≤—ã–¥–µ–ª—è—Ç—å –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–∞–∫–µ—Ç—ã.
- –î–µ–ª–∞–π—Ç–µ –≤—Å—ë —á–µ—Ä–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã: —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–æ–Ω–∫–∏ ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Å–µ—Ä–≤–∏—Å ‚Äî —Ç–æ–∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –º–µ—Ç–æ–¥–∞–º–∏.

---

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã

### 1. HTTP

- **net/http** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞–∫–µ—Ç. –≠—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.
- **github.com/go-chi/chi** ‚Äî —É–¥–æ–±–Ω—ã–π —Ä–æ—É—Ç–µ—Ä. –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∫–æ–¥ –∫–∞–∫ –≤ Java Spring (–ø–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º).
```bash
  go get github.com/go-chi/chi/v5
```

### 2. –†–∞–±–æ—Ç–∞ —Å JSON
- –í—Å—ë –µ—Å—Ç—å –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ:
```
import "encoding/json"
```
- JSON –º–∞—Ä—à–∞–ª–∏–Ω–≥ –∏ –∞–Ω–º–∞—Ä—à–∞–ª–∏–Ω–≥:
```
json.NewDecoder(r.Body).Decode(&data)
json.NewEncoder(w).Encode(response)
```

### 3. –•—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –ø–∞–º—è—Ç–∏
- –î–ª—è –Ω–∞—á–∞–ª–∞ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å []RaceResult –≤ –ø–∞–º—è—Ç–∏.
- –ú–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å –µ–≥–æ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –º—å—é—Ç–µ–∫—Å–æ–º:
```
type InMemoryStore struct {
    mu sync.Mutex
    data []RaceResult
}
```

### 4. –†–∞–±–æ—Ç–∞ —Å PostgreSQL (–Ω–∞ –±—É–¥—É—â–µ–µ)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ github.com/jmoiron/sqlx ‚Äî –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ database/sql, —É–¥–æ–±–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏.

```
go get github.com/jmoiron/sqlx
```

- –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```
db, err := sqlx.Connect("postgres", "user=... dbname=... sslmode=disable")
```

### –°–ª–æ–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- main.go –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä.
- http/handler.go –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥—ã –∏–∑ race/service.go.
- race/service.go –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ storage, —á—Ç–æ–±—ã —á–∏—Ç–∞—Ç—å/–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.
- model.go —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (RaceResult, Driver, –∏ —Ç.–¥.).

### –ü—Ä–∏–º–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```
main.go
  ‚îî‚îÄ‚îÄ http.NewHandler(service)
        ‚îî‚îÄ‚îÄ race.Service (—Å –ª–æ–≥–∏–∫–æ–π)
              ‚îî‚îÄ‚îÄ storage.Store (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–∞–º—è—Ç—å, –º–æ–∂–µ—Ç ‚Äî –±–∞–∑–∞)
```

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏
- –û–ø—Ä–µ–¥–µ–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Store –≤ race/service.go:

```
type Store interface {
    GetAll() []RaceResult
    Add(result RaceResult)
}
```

-–ê –≤ storage/memory.go –∏ storage/postgres.go —Ä–µ–∞–ª–∏–∑—É–π –µ–≥–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É.

### –ß—Ç–æ –ø–æ—á–∏—Ç–∞—Ç—å –¥–∞–ª—å—à–µ
- https://go.dev/doc/code ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ Go
- https://go.dev/doc/effective_go ‚Äî —Ö–æ—Ä–æ—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
- https://github.com/golang-standards/project-layout ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ (–Ω–æ –±–µ–∑ —Ñ–∞–Ω–∞—Ç–∏–∑–º–∞)

‚∏ª

### –ì–ª–∞–≤–Ω–æ–µ: –ø—Ä–æ—Å—Ç–æ –∏ –ø–æ —á–∞—Å—Ç—è–º

–í Go –Ω–µ –Ω—É–∂–Ω–æ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª–æ—ë–≤. –î–µ–ª–∞–π —à–∞–≥ –∑–∞ —à–∞–≥–æ–º:
1.	–ü—Ä–æ—á–∏—Ç–∞–ª –¥–∞–Ω–Ω—ã–µ.
2.	–í–µ—Ä–Ω—É–ª –∏—Ö —á–µ—Ä–µ–∑ HTTP.
3.	–î–æ–±–∞–≤–∏–ª –Ω–æ–≤—ã–µ.
4.	–°–æ—Ö—Ä–∞–Ω–∏–ª –≤ –ø–∞–º—è—Ç—å.
5.	–ü–µ—Ä–µ–Ω—ë—Å –≤ –±–∞–∑—É.

–¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è üí™